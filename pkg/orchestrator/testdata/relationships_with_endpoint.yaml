openapi: 3.0.3
info:
  title: Relationship Endpoint Fixture
  version: 1.0.0
paths:
  /articles:
    post:
      operationId: createArticle
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              x-formgen-relations:
                includes:
                  - author
                relations:
                  - name: author
                    filters:
                      - field: full_name
                        operator: ilike
                tree:
                  name: article
                  children:
                    author:
                      name: author
              required:
                - author_id
              properties:
                author_id:
                  type: string
                  x-relationships:
                    type: belongsTo
                    target: "#/components/schemas/author"
                  x-endpoint:
                    url: /api/authors
                    method: GET
                    labelField: full_name
                    valueField: id
                    dynamicParams:
                      tenant_id: "{{field:tenant_id}}"
                    auth:
                      strategy: header
                      header: X-Auth-Token
                      source: meta:formgen-auth
      responses:
        "200":
          description: Accepted
components:
  schemas:
    author:
      type: object
      x-formgen-label-field: full_name
      properties:
        id:
          type: string
        full_name:
          type: string
