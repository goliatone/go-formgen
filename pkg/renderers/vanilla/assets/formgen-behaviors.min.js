/**
 * formgen relationship runtime
 * DO NOT EDIT: generated via `npm run build`
 */
"use strict";var FormgenBehaviors=(()=>{var B=Object.defineProperty;var se=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var ue=Object.prototype.hasOwnProperty;var de=(e,t)=>{for(var r in t)B(e,r,{get:t[r],enumerable:!0})},ce=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of le(t))!ue.call(e,o)&&o!==r&&B(e,o,{get:()=>t[o],enumerable:!(n=se(t,o))||n.enumerable});return e};var fe=e=>ce(B({},"__esModule",{value:!0}),e);var De={};de(De,{__resetBehaviorsForTests:()=>Ve,autoResize:()=>F,autoSlug:()=>J,initBehaviors:()=>qe,initIcons:()=>j,initJSONEditors:()=>w,registerBehavior:()=>C,registerIconProvider:()=>D,slugify:()=>L});function L(e){return e?e.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s-]/g," ").trim().replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase():""}function N(e){var t;return(t=e==null?void 0:e.trim().toLowerCase())!=null?t:""}function W(e){let t=(e instanceof Document,e),r=Array.from(t.querySelectorAll("[data-behavior]"));return e instanceof HTMLElement&&e.hasAttribute("data-behavior")&&r.unshift(e),r}function G(e){if(!e)return[];let t=e.split(/[\s,]+/).map(r=>N(r)).filter(Boolean);return Array.from(new Set(t))}function K(e){if(e)try{return JSON.parse(e)}catch(t){console.warn("[formgen:behaviors] failed to parse data-behavior-config:",t);return}}function X(e,t,r){if(e&&typeof e=="object"&&e!==null){let n=e;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:r===1?e:void 0}if(r===1)return e}function Z(e,t){var n,o,i;let r=e.closest("[data-formgen-auto-init]");return r||(t instanceof HTMLElement?t:(i=(o=t.body)!=null?o:(n=e.ownerDocument)==null?void 0:n.body)!=null?i:e)}function pe(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)}function A(e){return pe(e)?e:e.querySelector("input, textarea")}function Y(e,t){var o;if(!t)return null;let r=`[name="${t}"]`,n=`#${me(t)}`;return(o=e.querySelector(r))!=null?o:e.querySelector(n)}function me(e){let t=e.replace(/[^a-zA-Z0-9_-]/g,"-");return t.startsWith("fg-")?t:`fg-${t}`}var J=({element:e,config:t,root:r})=>{let n=A(e);if(!n){console.warn("[formgen:behaviors] autoSlug requires an input or textarea target.");return}let o=ye(t);if(!o.source){console.warn("[formgen:behaviors] autoSlug config must define a source field.");return}let i=Y(r,o.source);if(!i){console.warn(`[formgen:behaviors] source field "${o.source}" not found for autoSlug.`);return}let p=!1,u=e.getAttribute("data-behavior-state")==="manual";!u&&n.value.trim().length>0&&(u=!0,e.setAttribute("data-behavior-state","manual"));let a=()=>{if(u)return;let d=L(i.value||"");d!==n.value&&(p=!0,n.value=d,n.dispatchEvent(new Event("input",{bubbles:!0})),p=!1)},s=()=>{a()},l=d=>{if(p)return;if(n.value.trim().length===0){u=!1,e.removeAttribute("data-behavior-state"),a();return}u=!0,e.setAttribute("data-behavior-state","manual")};return i.addEventListener("input",s),n.addEventListener("input",l),a(),()=>{i.removeEventListener("input",s),n.removeEventListener("input",l)}};function ye(e){if(typeof e=="string")return{source:e};if(e&&typeof e=="object"){let t=e;return{source:typeof t.source=="string"?t.source:void 0}}return{}}var F=({element:e,config:t})=>{let r=A(e);if(!(r instanceof HTMLTextAreaElement)){console.warn("[formgen:behaviors] autoResize requires a textarea target.");return}let n=ge(t),o=be(n),i=()=>{var x;let u=window.getComputedStyle(r),a=ve(u);if(!a)return;let s=parseFloat(u.paddingTop||"0")||0,l=parseFloat(u.paddingBottom||"0")||0,d=parseFloat(u.borderTopWidth||"0")||0,y=parseFloat(u.borderBottomWidth||"0")||0,f=s+l+d+y;r.style.height="auto";let b=(x=o.minRows)!=null?x:r.rows,g=o.maxRows,c=b?a*b+f:void 0,m=g?a*g+f:void 0,v=r.scrollHeight;c!==void 0&&v<c&&(v=c),m!==void 0&&v>m&&(v=m),r.style.height=`${Math.ceil(v)}px`,o.minRows!==void 0&&(r.rows=o.minRows)},p=()=>i();return r.addEventListener("input",p),i(),()=>{r.removeEventListener("input",p)}};function ge(e){if(!e||typeof e!="object")return{};let t=e;return{minRows:Q(t.minRows),maxRows:Q(t.maxRows)}}function Q(e){let t=typeof e=="number"?e:typeof e=="string"?Number.parseInt(e,10):NaN;if(!Number.isFinite(t))return;let r=Math.floor(t);if(!(r<=0))return r}function be(e){let t=e.minRows,r=e.maxRows;return t!==void 0&&r!==void 0&&r<t?{minRows:t,maxRows:t}:e}function ve(e){let t=e.lineHeight;if(t&&t!=="normal"){let n=Number.parseFloat(t);if(Number.isFinite(n)&&n>0)return n}let r=Number.parseFloat(e.fontSize||"");if(Number.isFinite(r)&&r>0)return r*1.2}var q=new Map,S=new WeakMap;function C(e,t){let r=N(e);!r||typeof t!="function"||q.set(r,t)}function U(e=document){let t=W(e),r=[];for(let n of t){let o=G(n.getAttribute("data-behavior"));if(o.length===0)continue;let i=K(n.getAttribute("data-behavior-config")),p=Z(n,e);for(let u of o){let a=N(u);if(!a||xe(n,a))continue;let s=q.get(a);if(!s){console.warn(`[formgen:behaviors] behavior "${a}" is not registered.`);continue}let l=X(i,a,o.length),d=he(s,{element:n,name:a,root:p,config:l});Se(n,a,d),r.push({element:n,name:a,dispose:d})}}return{records:r,dispose:()=>{for(let n of r.splice(0)){if(n.dispose)try{n.dispose()}catch(o){console.warn(`[formgen:behaviors] dispose failed for ${n.name}:`,o)}Te(n.element,n.name)}}}}function ee(){q.clear(),S=new WeakMap}function he(e,t){let r;try{r=e(t)}catch(n){console.warn(`[formgen:behaviors] factory for "${t.name}" failed:`,n);return}if(typeof r=="function")return r;if(r&&typeof r=="object"&&typeof r.dispose=="function")return()=>r.dispose()}function Ee(e){let t=S.get(e);return t||(t=new Map,S.set(e,t)),t}function xe(e,t){let r=S.get(e);return r?r.has(t):!1}function Se(e,t,r){Ee(e).set(t,r)}function Te(e,t){let r=S.get(e);r&&(r.delete(t),r.size===0&&S.delete(e))}var V=new Map;function D(e,t){let r=M(e);!r||typeof t!="function"||V.set(r,t)}function j(e=document){var n,o;let t=we(e),r=[];for(let i of t){let p=M(i.getAttribute("data-icon")),u=M(i.getAttribute("data-icon-source"));if(!p||!u)continue;if(M(i.getAttribute("data-icon-raw"))!==""){r.push({element:i,name:p,source:u,rendered:!1});continue}let s=V.get(u);if(!s){r.push({element:i,name:p,source:u,rendered:!1});continue}let l=Ne(s,p),d=Ae(l,(n=i.ownerDocument)!=null?n:document);if(!d){r.push({element:i,name:p,source:u,rendered:!1});continue}let y=Le(i);if(!y){r.push({element:i,name:p,source:u,rendered:!1});continue}for(;y.firstChild;)y.removeChild(y.firstChild);let f=((o=i.ownerDocument)!=null?o:document).createElement("span");f.className="inline-flex size-5 text-current",f.setAttribute("aria-hidden","true"),f.appendChild(d),y.appendChild(f),r.push({element:i,name:p,source:u,rendered:!0})}return{records:r}}function P(){V.clear()}function we(e){let t=(e instanceof Document,e),r=Array.from(t.querySelectorAll("[data-icon][data-icon-source]"));return e instanceof HTMLElement&&e.hasAttribute("data-icon")&&e.hasAttribute("data-icon-source")&&r.unshift(e),Array.from(new Set(r))}function Le(e){let t=e.parentElement;if(!t)return null;let r=e.previousElementSibling;return r instanceof HTMLElement&&r.tagName==="SPAN"&&r.getAttribute("aria-hidden")==="true"?r:t.querySelector(':scope > span[aria-hidden="true"]')}function Ne(e,t){var r;try{return(r=e(t))!=null?r:""}catch(n){return console.warn(`[formgen:icons] provider for "${t}" failed:`,n),""}}function Ae(e,t){let r=e==null?void 0:e.trim();if(!r||typeof DOMParser=="undefined")return null;let i=new DOMParser().parseFromString(r,"image/svg+xml").querySelector("svg");return i?(Ce(i),typeof t.importNode=="function"?t.importNode(i,!0):i):null}function Ce(e){e.querySelectorAll("script, foreignObject, iframe, object, embed").forEach(r=>{var n;(n=r.parentNode)==null||n.removeChild(r)});let t=[e,...Array.from(e.querySelectorAll("*"))];for(let r of t){let n=Array.from(r.attributes);for(let o of n){let i=o.name.toLowerCase(),p=o.value.trim().toLowerCase();if(i.startsWith("on")){r.removeAttribute(o.name);continue}(i==="href"||i==="xlink:href"||i==="src")&&(!(p===""||p.startsWith("#")||p.startsWith("data:image/"))||p.startsWith("javascript:"))&&r.removeAttribute(o.name)}}}function M(e){var t;return(t=e==null?void 0:e.trim().toLowerCase())!=null?t:""}var Me='[data-json-editor="true"]',te="data-json-editor-init",je=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"null",label:"Null"},{value:"object",label:"Object"},{value:"array",label:"Array"}],Ie=0;function He(){return`json-row-${++Ie}`}function I(e){try{return JSON.parse(e)}catch{return}}function _(e){return JSON.stringify(e,null,2)}function H(e){return e===null?"null":Array.isArray(e)?"array":typeof e=="object"?"object":typeof e=="number"?"number":typeof e=="boolean"?"boolean":"string"}function re(e){return Array.isArray(e)?"array":"object"}function k(e){let t=e.trim();if(t==="")return{valid:!1,error:"Number required"};let r=Number(t);return Number.isNaN(r)?{valid:!1,error:"Invalid number"}:Number.isFinite(r)?{valid:!0,value:r}:{valid:!1,error:"Infinity not allowed"}}function Oe(e,t){switch(t){case"string":return e===null?"null":typeof e=="object"?JSON.stringify(e):String(e);case"number":{if(typeof e=="number")return e;if(typeof e=="string"){let r=k(e);return r.valid?r.value:0}return 0}case"boolean":return!!e;case"null":return null;case"object":return{};case"array":return[]}}function T(e,t,r,n,o,i,p=!1){let u=He(),a={id:u,key:t,value:r,type:n,element:null,depth:o,lastValidNumber:typeof r=="number"?r:0,hasError:!1},s=!e.readonly&&!e.disabled,l=document.createElement("div");l.className=`flex items-start gap-2 ${o>0?"ml-4 pl-2 border-l-2 border-gray-200 dark:border-gray-700":""}`,l.setAttribute("data-json-row-id",u);let d=document.createElement("input");d.type="text",d.value=t,p?(d.placeholder="idx",d.disabled=!0,d.readOnly=!0,d.className="flex-shrink-0 w-16 px-2 py-1.5 text-sm text-center border border-gray-200 rounded-md bg-gray-100 dark:bg-slate-700 dark:border-gray-600 dark:text-gray-300 opacity-60 cursor-not-allowed"):(d.placeholder="key",d.disabled=!s,d.readOnly=e.readonly,d.className="flex-shrink-0 w-32 px-2 py-1.5 text-sm border border-gray-200 rounded-md bg-white dark:bg-slate-800 dark:border-gray-600 dark:text-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"+(s?"":" opacity-60 cursor-not-allowed"),s&&d.addEventListener("input",()=>{a.key=d.value,i()}));let y=document.createElement("div");y.className="flex-1 min-w-0",ne(y,a,e,i);let f=document.createElement("select");f.disabled=!s,f.className="flex-shrink-0 w-24 px-2 py-1.5 text-sm border border-gray-200 rounded-md bg-white dark:bg-slate-800 dark:border-gray-600 dark:text-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"+(s?"":" opacity-60 cursor-not-allowed");for(let g of je){let c=document.createElement("option");c.value=g.value,c.textContent=g.label,c.selected=g.value===n,f.appendChild(c)}s&&f.addEventListener("change",()=>{var m,v;let g=f.value,c=a.value;if(a.type=g,a.hasError=!1,a.numberError=void 0,g==="number")if(typeof c=="number")a.value=c,a.lastValidNumber=c;else if(typeof c=="string"){let x=k(c);x.valid?(a.value=x.value,a.lastValidNumber=x.value):(a.value=(m=a.lastValidNumber)!=null?m:0,a.hasError=!0,a.numberError=x.error)}else a.value=(v=a.lastValidNumber)!=null?v:0;else a.value=Oe(c,g);y.innerHTML="",ne(y,a,e,i),i()});let b=document.createElement("div");if(b.className="flex items-center gap-1 flex-shrink-0",s){let g=z("\u2191","Move up",()=>{oe(e,a,-1),i()}),c=z("\u2193","Move down",()=>{oe(e,a,1),i()}),m=z("\xD7","Delete",()=>{Re(e,a),i()});m.classList.add("text-red-500","hover:text-red-700"),b.appendChild(g),b.appendChild(c),b.appendChild(m)}return l.appendChild(d),l.appendChild(y),l.appendChild(f),l.appendChild(b),a.element=l,a}function ne(e,t,r,n){var i,p,u,a;let o=!r.readonly&&!r.disabled;switch(t.type){case"boolean":{let s=document.createElement("div");s.className="flex items-center gap-2 py-1.5";let l=document.createElement("input");l.type="checkbox",l.checked=t.value===!0,l.disabled=!o,l.className="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"+(o?"":" opacity-60 cursor-not-allowed"),o&&l.addEventListener("change",()=>{t.value=l.checked,n()});let d=document.createElement("span");d.textContent=t.value?"true":"false",d.className="text-sm text-gray-600 dark:text-gray-400",o&&l.addEventListener("change",()=>{d.textContent=l.checked?"true":"false"}),s.appendChild(l),s.appendChild(d),e.appendChild(s);break}case"null":{let s=document.createElement("span");s.textContent="null",s.className="text-sm text-gray-400 italic py-1.5 block",e.appendChild(s);break}case"number":{let s=document.createElement("div");s.className="relative";let l=document.createElement("input");l.type="text",l.inputMode="decimal",l.value=String((i=t.value)!=null?i:0),l.disabled=!o,l.readOnly=r.readonly,l.className="w-full px-2 py-1.5 text-sm border rounded-md bg-white dark:bg-slate-800 dark:text-gray-200 focus:ring-1"+(t.hasError?" border-red-500 focus:border-red-500 focus:ring-red-500":" border-gray-200 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500")+(o?"":" opacity-60 cursor-not-allowed");let d=document.createElement("span");d.className="absolute right-2 top-1/2 -translate-y-1/2 text-xs text-red-500 hidden",l.dataset.lastValidNumber=String((p=t.lastValidNumber)!=null?p:0),t.hasError&&(d.textContent=(u=t.numberError)!=null?u:"Invalid number",d.classList.remove("hidden")),o&&(l.addEventListener("input",()=>{var f;let y=k(l.value);y.valid?(t.value=y.value,t.lastValidNumber=y.value,t.hasError=!1,t.numberError=void 0,l.dataset.lastValidNumber=String(y.value),l.classList.remove("border-red-500","focus:border-red-500","focus:ring-red-500"),l.classList.add("border-gray-200","dark:border-gray-600","focus:border-blue-500","focus:ring-blue-500"),d.classList.add("hidden"),n()):(t.value=(f=t.lastValidNumber)!=null?f:0,t.hasError=!0,t.numberError=y.error,l.classList.remove("border-gray-200","dark:border-gray-600","focus:border-blue-500","focus:ring-blue-500"),l.classList.add("border-red-500","focus:border-red-500","focus:ring-red-500"),d.textContent=y.error,d.classList.remove("hidden"))}),l.addEventListener("blur",()=>{var y,f;t.hasError&&(l.value=String((y=t.lastValidNumber)!=null?y:0),t.hasError=!1,t.numberError=void 0,l.dataset.lastValidNumber=String((f=t.lastValidNumber)!=null?f:0),l.classList.remove("border-red-500","focus:border-red-500","focus:ring-red-500"),l.classList.add("border-gray-200","dark:border-gray-600","focus:border-blue-500","focus:ring-blue-500"),d.classList.add("hidden"))})),s.appendChild(l),s.appendChild(d),e.appendChild(s);break}case"object":case"array":{let s=document.createElement("div");s.className="space-y-2 py-1";let l=document.createElement("span");l.textContent=t.type==="object"?"{ Object }":"[ Array ]",l.className="text-xs text-gray-500 dark:text-gray-400 font-medium block mb-1",s.appendChild(l);let d=document.createElement("div");if(d.className="space-y-2",t.type==="array"&&d.setAttribute("data-json-array","true"),t.type==="object"&&typeof t.value=="object"&&t.value!==null&&!Array.isArray(t.value))for(let[y,f]of Object.entries(t.value)){let b=T(r,y,f,H(f),t.depth+1,()=>{let g={};d.querySelectorAll(":scope > [data-json-row-id]").forEach(c=>{let m=c.querySelector('input[type="text"]');(m&&!m.disabled||m)&&(g[m.value]=h(c))}),t.value=g,n()},!1);d.appendChild(b.element)}else t.type==="array"&&Array.isArray(t.value)&&t.value.forEach((y,f)=>{let b=T(r,String(f),y,H(y),t.depth+1,()=>{let g=[];d.querySelectorAll(":scope > [data-json-row-id]").forEach(c=>{g.push(h(c))}),t.value=g,n()},!0);d.appendChild(b.element)});if(s.appendChild(d),o){let y=document.createElement("button");y.type="button",y.textContent=t.type==="array"?"+ Add Item":"+ Add Field",y.className="mt-1 text-xs text-blue-600 hover:text-blue-700 dark:text-blue-400",y.addEventListener("click",()=>{let f=t.type==="array",b=f?String(d.children.length):"",g=T(r,b,"","string",t.depth+1,()=>{if(t.type==="object"){let c={};d.querySelectorAll(":scope > [data-json-row-id]").forEach(m=>{let v=m.querySelector('input[type="text"]');v&&(c[v.value]=h(m))}),t.value=c}else{let c=[];d.querySelectorAll(":scope > [data-json-row-id]").forEach(m=>{c.push(h(m))}),t.value=c}t.type==="array"&&E(d),n()},f);if(d.appendChild(g.element),t.type==="object"){let c={};d.querySelectorAll(":scope > [data-json-row-id]").forEach(m=>{let v=m.querySelector('input[type="text"]');v&&(c[v.value]=h(m))}),t.value=c}else{let c=[];d.querySelectorAll(":scope > [data-json-row-id]").forEach(m=>{c.push(h(m))}),t.value=c}t.type==="array"&&E(d),n()}),s.appendChild(y)}e.appendChild(s);break}default:{let s=document.createElement("input");s.type="text",s.value=String((a=t.value)!=null?a:""),s.disabled=!o,s.readOnly=r.readonly,s.className="w-full px-2 py-1.5 text-sm border border-gray-200 rounded-md bg-white dark:bg-slate-800 dark:border-gray-600 dark:text-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"+(o?"":" opacity-60 cursor-not-allowed"),o&&s.addEventListener("input",()=>{t.value=s.value,n()}),e.appendChild(s)}}}function h(e){var n,o,i,p;let t=e.querySelector("select"),r=(t==null?void 0:t.value)||"string";switch(r){case"boolean":{let u=e.querySelector('input[type="checkbox"]');return(n=u==null?void 0:u.checked)!=null?n:!1}case"null":return null;case"number":{let u=e.querySelector('input[type="text"][inputmode="decimal"]');if(u){let s=k(u.value);if(s.valid)return s.value;let l=u.dataset.lastValidNumber;return l!==void 0&&l!==""?Number(l):0}let a=e.querySelector('input[type="number"]');return parseFloat((o=a==null?void 0:a.value)!=null?o:"0")||0}case"object":case"array":{let u=e.querySelectorAll(":scope > div > div > div > [data-json-row-id]");if(r==="object"){let a={};return u.forEach(s=>{let l=s.querySelector('input[type="text"]');l&&(a[l.value]=h(s))}),a}else{let a=[];return u.forEach(s=>a.push(h(s))),a}}default:{let u=e.querySelectorAll('input[type="text"]');for(let a=u.length-1;a>=0;a--){let s=u[a];if(a>0||!s.disabled&&s.placeholder!=="key"&&s.placeholder!=="idx")return(i=s.value)!=null?i:""}return u.length>1&&(p=u[1].value)!=null?p:""}}}function E(e){if(!e)return;Array.from(e.querySelectorAll(":scope > [data-json-row-id]")).forEach((r,n)=>{let o=r.querySelector('input[type="text"]');o&&(o.value=String(n))})}function z(e,t,r){let n=document.createElement("button");return n.type="button",n.textContent=e,n.title=t,n.className="w-6 h-6 flex items-center justify-center text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700",n.addEventListener("click",o=>{o.preventDefault(),r()}),n}function oe(e,t,r){let n=e.rows.indexOf(t);if(n!==-1){let a=n+r;if(a<0||a>=e.rows.length)return;if([e.rows[n],e.rows[a]]=[e.rows[a],e.rows[n]],e.rowsContainer){let s=Array.from(e.rowsContainer.children);r===-1&&n>0?e.rowsContainer.insertBefore(s[n],s[n-1]):r===1&&n<s.length-1&&e.rowsContainer.insertBefore(s[n+1],s[n]),e.rootType==="array"&&E(e.rowsContainer)}return}let o=t.element.parentElement;if(!o)return;let i=Array.from(o.querySelectorAll(":scope > [data-json-row-id]")),p=i.indexOf(t.element);if(p===-1)return;let u=p+r;u<0||u>=i.length||(r===-1?o.insertBefore(i[p],i[u]):o.insertBefore(i[u],i[p]),o.getAttribute("data-json-array")==="true"&&E(o))}function Re(e,t){let r=e.rows.indexOf(t);if(r!==-1){e.rows.splice(r,1),t.element.remove(),e.rootType==="array"&&E(e.rowsContainer);return}let n=t.element.parentElement;t.element.remove(),n&&n.getAttribute("data-json-array")==="true"&&E(n)}function ke(e,t){var i;if(e.readonly||e.disabled)return;let r=e.rootType==="array",n=r?String(e.rows.length):"",o=T(e,n,"","string",0,t,r);e.rows.push(o),(i=e.rowsContainer)==null||i.appendChild(o.element),r&&E(e.rowsContainer),t()}function Be(e){if(e.rootType==="array")return e.rows.map(r=>r.value);let t={};for(let r of e.rows)r.key.trim()&&(t[r.key]=r.value);return t}function $(e){let t=Be(e),r=_(t);e.textarea&&(e.textarea.value=r),e.preview&&(e.preview.textContent=r),e.parseError=null,e.root.setAttribute("data-json-editor-state","valid"),O(e)}function O(e){var n;if(!e.addButton)return;let t=e.addButton.querySelector("span")||e.addButton.lastChild,r=e.rootType==="array"?"Add Item":"Add Field";if(t&&t.nodeType===Node.TEXT_NODE)t.textContent=r;else if(t&&t instanceof HTMLElement)t.textContent=r;else for(let o of e.addButton.childNodes)if(o.nodeType===Node.TEXT_NODE&&((n=o.textContent)!=null&&n.trim())){o.textContent=` ${r}`;break}}function ie(e,t){var n;e.rows=[],e.rowsContainer&&(e.rowsContainer.innerHTML="");let r=()=>$(e);if(e.rowsContainer){if(Array.isArray(t))e.rootType="array",e.rowsContainer.setAttribute("data-json-array","true"),t.forEach((o,i)=>{var a;let p=H(o),u=T(e,String(i),o,p,0,r,!0);e.rows.push(u),(a=e.rowsContainer)==null||a.appendChild(u.element)}),E(e.rowsContainer);else if(t&&typeof t=="object"){e.rootType="object",e.rowsContainer.removeAttribute("data-json-array");for(let[o,i]of Object.entries(t)){let p=H(i),u=T(e,o,i,p,0,r,!1);e.rows.push(u),(n=e.rowsContainer)==null||n.appendChild(u.element)}}else e.rootType="object",e.rowsContainer.removeAttribute("data-json-array");O(e)}}function R(e,t){e.parseError=t,e.root.setAttribute("data-json-editor-state","invalid"),e.preview&&e.preview.setAttribute("data-state","invalid")}function Je(e,t){if(e.activeView=t,e.root.setAttribute("data-json-editor-active",t),e.guiContainer&&e.guiContainer.classList.toggle("hidden",t!=="gui"),e.textarea&&e.textarea.classList.toggle("hidden",t!=="raw"),e.preview&&e.preview.classList.add("hidden"),e.root.querySelectorAll("[data-json-editor-mode-btn]").forEach(n=>{let i=n.getAttribute("data-json-editor-mode-btn")===t;n.classList.toggle("bg-blue-600",i),n.classList.toggle("text-white",i),n.classList.toggle("border-blue-600",i),n.classList.toggle("hover:bg-blue-700",i),n.classList.toggle("bg-white",!i),n.classList.toggle("text-gray-700",!i),n.classList.toggle("border-gray-200",!i),n.classList.toggle("hover:bg-gray-50",!i)}),t==="gui"&&e.textarea){let n=I(e.textarea.value||"{}");n!==void 0?typeof n=="object"||Array.isArray(n)?(ie(e,n),e.parseError=null):R(e,"Root must be an object or array"):R(e,"Invalid JSON in raw editor")}else t==="raw"&&$(e)}function Fe(e){if(e.getAttribute(te)==="true")return;e.setAttribute(te,"true");let t=e.querySelector("[data-json-editor-input]"),r=e.querySelector("[data-json-editor-preview]"),n=e.querySelector("[data-json-editor-gui]"),o=e.querySelector("[data-json-editor-rows]"),i=e.querySelector("[data-json-editor-add-field]"),p=e.querySelector("[data-json-editor-mode-toggle]"),u=e.querySelector("[data-json-editor-format]"),a=e.querySelector("[data-json-editor-toggle]"),s=e.getAttribute("data-json-editor-mode")||"raw",l=e.getAttribute("data-json-editor-active")||"raw",d=e.getAttribute("data-json-editor-readonly")==="true",y=e.getAttribute("data-json-editor-disabled")==="true",f={root:e,textarea:t,preview:r,guiContainer:n,rowsContainer:o,addButton:i,rows:[],mode:s,activeView:l,readonly:d,disabled:y,rootType:"object",parseError:null},b="{}";t&&(b=t.value||"{}");let g=()=>$(f);if(n&&o){let c=I(b);c!==void 0?typeof c=="object"||Array.isArray(c)?(f.rootType=re(c),ie(f,c)):(f.rootType="object",R(f,"Root must be an object or array"),O(f)):(f.rootType="object",R(f,"Invalid initial JSON"),O(f))}p&&!y&&p.querySelectorAll("[data-json-editor-mode-btn]").forEach(c=>{c.addEventListener("click",m=>{m.preventDefault();let v=c.getAttribute("data-json-editor-mode-btn");Je(f,v)})}),!d&&!y&&(i&&i.addEventListener("click",c=>{c.preventDefault(),ke(f,g)}),t&&t.addEventListener("input",()=>{let c=I(t.value),m=c!==void 0;f.root.setAttribute("data-json-editor-state",m?"valid":"invalid"),m?(f.parseError=null,(typeof c=="object"||Array.isArray(c))&&(f.rootType=re(c))):f.parseError="Invalid JSON",r&&(r.textContent=m?_(c):t.value,r.setAttribute("data-state",m?"valid":"invalid"))}),u&&t&&u.addEventListener("click",c=>{c.preventDefault();let m=I(t.value);m!==void 0&&(t.value=_(m))})),a&&t&&r&&a.addEventListener("click",c=>{c.preventDefault();let m=e.classList.contains("json-editor--collapsed");e.classList.toggle("json-editor--collapsed",!m),t.classList.toggle("hidden",!m),r.classList.toggle("hidden",m),a.textContent=m?"Collapse":"Expand",a.setAttribute("aria-expanded",m?"true":"false")})}function w(){document.querySelectorAll(Me).forEach(Fe)}typeof document!="undefined"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",w):w());ae();function ae(){C("autoSlug",J),C("autoResize",F)}function qe(e=document){let t=U(e);return j(e),w(),t}function Ve(){ee(),P(),ae()}return fe(De);})();
//# sourceMappingURL=formgen-behaviors.min.js.map
