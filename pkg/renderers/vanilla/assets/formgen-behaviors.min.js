/**
 * formgen relationship runtime
 * DO NOT EDIT: generated via `npm run build`
 */
"use strict";var FormgenBehaviors=(()=>{var x=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames;var O=Object.prototype.hasOwnProperty;var Z=(e,t)=>{for(var n in t)x(e,n,{get:t[n],enumerable:!0})},J=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of G(t))!O.call(e,o)&&o!==n&&x(e,o,{get:()=>t[o],enumerable:!(r=V(t,o))||r.enumerable});return e};var K=e=>J(x({},"__esModule",{value:!0}),e);var pe={};Z(pe,{__resetBehaviorsForTests:()=>de,autoResize:()=>L,autoSlug:()=>M,initBehaviors:()=>me,initIcons:()=>w,registerBehavior:()=>b,registerIconProvider:()=>A,slugify:()=>h});function h(e){return e?e.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s-]/g," ").trim().replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase():""}function v(e){var t;return(t=e==null?void 0:e.trim().toLowerCase())!=null?t:""}function z(e){let t=(e instanceof Document,e),n=Array.from(t.querySelectorAll("[data-behavior]"));return e instanceof HTMLElement&&e.hasAttribute("data-behavior")&&n.unshift(e),n}function D(e){if(!e)return[];let t=e.split(/[\s,]+/).map(n=>v(n)).filter(Boolean);return Array.from(new Set(t))}function N(e){if(e)try{return JSON.parse(e)}catch(t){console.warn("[formgen:behaviors] failed to parse data-behavior-config:",t);return}}function P(e,t,n){if(e&&typeof e=="object"&&e!==null){let r=e;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:n===1?e:void 0}if(n===1)return e}function k(e,t){var r,o,i;let n=e.closest("[data-formgen-auto-init]");return n||(t instanceof HTMLElement?t:(i=(o=t.body)!=null?o:(r=e.ownerDocument)==null?void 0:r.body)!=null?i:e)}function Q(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)}function y(e){return Q(e)?e:e.querySelector("input, textarea")}function q(e,t){var o;if(!t)return null;let n=`[name="${t}"]`,r=`#${U(t)}`;return(o=e.querySelector(n))!=null?o:e.querySelector(r)}function U(e){let t=e.replace(/[^a-zA-Z0-9_-]/g,"-");return t.startsWith("fg-")?t:`fg-${t}`}var M=({element:e,config:t,root:n})=>{let r=y(e);if(!r){console.warn("[formgen:behaviors] autoSlug requires an input or textarea target.");return}let o=X(t);if(!o.source){console.warn("[formgen:behaviors] autoSlug config must define a source field.");return}let i=q(n,o.source);if(!i){console.warn(`[formgen:behaviors] source field "${o.source}" not found for autoSlug.`);return}let a=!1,s=e.getAttribute("data-behavior-state")==="manual";!s&&r.value.trim().length>0&&(s=!0,e.setAttribute("data-behavior-state","manual"));let u=()=>{if(s)return;let c=h(i.value||"");c!==r.value&&(a=!0,r.value=c,r.dispatchEvent(new Event("input",{bubbles:!0})),a=!1)},f=()=>{u()},l=c=>{if(a)return;if(r.value.trim().length===0){s=!1,e.removeAttribute("data-behavior-state"),u();return}s=!0,e.setAttribute("data-behavior-state","manual")};return i.addEventListener("input",f),r.addEventListener("input",l),u(),()=>{i.removeEventListener("input",f),r.removeEventListener("input",l)}};function X(e){if(typeof e=="string")return{source:e};if(e&&typeof e=="object"){let t=e;return{source:typeof t.source=="string"?t.source:void 0}}return{}}var L=({element:e,config:t})=>{let n=y(e);if(!(n instanceof HTMLTextAreaElement)){console.warn("[formgen:behaviors] autoResize requires a textarea target.");return}let r=Y(t),o=ee(r),i=()=>{var C;let s=window.getComputedStyle(n),u=te(s);if(!u)return;let f=parseFloat(s.paddingTop||"0")||0,l=parseFloat(s.paddingBottom||"0")||0,c=parseFloat(s.borderTopWidth||"0")||0,m=parseFloat(s.borderBottomWidth||"0")||0,d=f+l+c+m;n.style.height="auto";let S=(C=o.minRows)!=null?C:n.rows,F=o.maxRows,T=S?u*S+d:void 0,I=F?u*F+d:void 0,g=n.scrollHeight;T!==void 0&&g<T&&(g=T),I!==void 0&&g>I&&(g=I),n.style.height=`${Math.ceil(g)}px`,o.minRows!==void 0&&(n.rows=o.minRows)},a=()=>i();return n.addEventListener("input",a),i(),()=>{n.removeEventListener("input",a)}};function Y(e){if(!e||typeof e!="object")return{};let t=e;return{minRows:_(t.minRows),maxRows:_(t.maxRows)}}function _(e){let t=typeof e=="number"?e:typeof e=="string"?Number.parseInt(e,10):NaN;if(!Number.isFinite(t))return;let n=Math.floor(t);if(!(n<=0))return n}function ee(e){let t=e.minRows,n=e.maxRows;return t!==void 0&&n!==void 0&&n<t?{minRows:t,maxRows:t}:e}function te(e){let t=e.lineHeight;if(t&&t!=="normal"){let r=Number.parseFloat(t);if(Number.isFinite(r)&&r>0)return r}let n=Number.parseFloat(e.fontSize||"");if(Number.isFinite(n)&&n>0)return n*1.2}var H=new Map,p=new WeakMap;function b(e,t){let n=v(e);!n||typeof t!="function"||H.set(n,t)}function $(e=document){let t=z(e),n=[];for(let r of t){let o=D(r.getAttribute("data-behavior"));if(o.length===0)continue;let i=N(r.getAttribute("data-behavior-config")),a=k(r,e);for(let s of o){let u=v(s);if(!u||oe(r,u))continue;let f=H.get(u);if(!f){console.warn(`[formgen:behaviors] behavior "${u}" is not registered.`);continue}let l=P(i,u,o.length),c=ne(f,{element:r,name:u,root:a,config:l});ie(r,u,c),n.push({element:r,name:u,dispose:c})}}return{records:n,dispose:()=>{for(let r of n.splice(0)){if(r.dispose)try{r.dispose()}catch(o){console.warn(`[formgen:behaviors] dispose failed for ${r.name}:`,o)}se(r.element,r.name)}}}}function W(){H.clear(),p=new WeakMap}function ne(e,t){let n;try{n=e(t)}catch(r){console.warn(`[formgen:behaviors] factory for "${t.name}" failed:`,r);return}if(typeof n=="function")return n;if(n&&typeof n=="object"&&typeof n.dispose=="function")return()=>n.dispose()}function re(e){let t=p.get(e);return t||(t=new Map,p.set(e,t)),t}function oe(e,t){let n=p.get(e);return n?n.has(t):!1}function ie(e,t,n){re(e).set(t,n)}function se(e,t){let n=p.get(e);n&&(n.delete(t),n.size===0&&p.delete(e))}var R=new Map;function A(e,t){let n=E(e);!n||typeof t!="function"||R.set(n,t)}function w(e=document){var r,o;let t=ae(e),n=[];for(let i of t){let a=E(i.getAttribute("data-icon")),s=E(i.getAttribute("data-icon-source"));if(!a||!s)continue;if(E(i.getAttribute("data-icon-raw"))!==""){n.push({element:i,name:a,source:s,rendered:!1});continue}let f=R.get(s);if(!f){n.push({element:i,name:a,source:s,rendered:!1});continue}let l=ce(f,a),c=fe(l,(r=i.ownerDocument)!=null?r:document);if(!c){n.push({element:i,name:a,source:s,rendered:!1});continue}let m=ue(i);if(!m){n.push({element:i,name:a,source:s,rendered:!1});continue}for(;m.firstChild;)m.removeChild(m.firstChild);let d=((o=i.ownerDocument)!=null?o:document).createElement("span");d.className="inline-flex size-5 text-current",d.setAttribute("aria-hidden","true"),d.appendChild(c),m.appendChild(d),n.push({element:i,name:a,source:s,rendered:!0})}return{records:n}}function B(){R.clear()}function ae(e){let t=(e instanceof Document,e),n=Array.from(t.querySelectorAll("[data-icon][data-icon-source]"));return e instanceof HTMLElement&&e.hasAttribute("data-icon")&&e.hasAttribute("data-icon-source")&&n.unshift(e),Array.from(new Set(n))}function ue(e){let t=e.parentElement;if(!t)return null;let n=e.previousElementSibling;return n instanceof HTMLElement&&n.tagName==="SPAN"&&n.getAttribute("aria-hidden")==="true"?n:t.querySelector(':scope > span[aria-hidden="true"]')}function ce(e,t){var n;try{return(n=e(t))!=null?n:""}catch(r){return console.warn(`[formgen:icons] provider for "${t}" failed:`,r),""}}function fe(e,t){let n=e==null?void 0:e.trim();if(!n||typeof DOMParser=="undefined")return null;let i=new DOMParser().parseFromString(n,"image/svg+xml").querySelector("svg");return i?(le(i),typeof t.importNode=="function"?t.importNode(i,!0):i):null}function le(e){e.querySelectorAll("script, foreignObject, iframe, object, embed").forEach(n=>{var r;(r=n.parentNode)==null||r.removeChild(n)});let t=[e,...Array.from(e.querySelectorAll("*"))];for(let n of t){let r=Array.from(n.attributes);for(let o of r){let i=o.name.toLowerCase(),a=o.value.trim().toLowerCase();if(i.startsWith("on")){n.removeAttribute(o.name);continue}(i==="href"||i==="xlink:href"||i==="src")&&(!(a===""||a.startsWith("#")||a.startsWith("data:image/"))||a.startsWith("javascript:"))&&n.removeAttribute(o.name)}}}function E(e){var t;return(t=e==null?void 0:e.trim().toLowerCase())!=null?t:""}j();function j(){b("autoSlug",M),b("autoResize",L)}function me(e=document){let t=$(e);return w(e),t}function de(){W(),B(),j()}return K(pe);})();
//# sourceMappingURL=formgen-behaviors.min.js.map
