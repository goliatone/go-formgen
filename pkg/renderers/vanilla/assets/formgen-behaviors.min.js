/**
 * formgen relationship runtime
 * DO NOT EDIT: generated via `npm run build`
 */
"use strict";var FormgenBehaviors=(()=>{var H=Object.defineProperty;var se=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var ue=Object.prototype.hasOwnProperty;var de=(e,t)=>{for(var r in t)H(e,r,{get:t[r],enumerable:!0})},ce=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of le(t))!ue.call(e,a)&&a!==r&&H(e,a,{get:()=>t[a],enumerable:!(n=se(t,a))||n.enumerable});return e};var fe=e=>ce(H({},"__esModule",{value:!0}),e);var Ve={};de(Ve,{__resetBehaviorsForTests:()=>De,autoResize:()=>R,autoSlug:()=>O,initBehaviors:()=>qe,initIcons:()=>M,initJSONEditors:()=>w,registerBehavior:()=>N,registerIconProvider:()=>J,slugify:()=>T});function T(e){return e?e.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s-]/g," ").trim().replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase():""}function L(e){var t;return(t=e==null?void 0:e.trim().toLowerCase())!=null?t:""}function _(e){let t=(e instanceof Document,e),r=Array.from(t.querySelectorAll("[data-behavior]"));return e instanceof HTMLElement&&e.hasAttribute("data-behavior")&&r.unshift(e),r}function $(e){if(!e)return[];let t=e.split(/[\s,]+/).map(r=>L(r)).filter(Boolean);return Array.from(new Set(t))}function W(e){if(e)try{return JSON.parse(e)}catch(t){console.warn("[formgen:behaviors] failed to parse data-behavior-config:",t);return}}function G(e,t,r){if(e&&typeof e=="object"&&e!==null){let n=e;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:r===1?e:void 0}if(r===1)return e}function K(e,t){var n,a,s;let r=e.closest("[data-formgen-auto-init]");return r||(t instanceof HTMLElement?t:(s=(a=t.body)!=null?a:(n=e.ownerDocument)==null?void 0:n.body)!=null?s:e)}function pe(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)}function A(e){return pe(e)?e:e.querySelector("input, textarea")}function X(e,t){var a;if(!t)return null;let r=`[name="${t}"]`,n=`#${me(t)}`;return(a=e.querySelector(r))!=null?a:e.querySelector(n)}function me(e){let t=e.replace(/[^a-zA-Z0-9_-]/g,"-");return t.startsWith("fg-")?t:`fg-${t}`}var O=({element:e,config:t,root:r})=>{let n=A(e);if(!n){console.warn("[formgen:behaviors] autoSlug requires an input or textarea target.");return}let a=ye(t);if(!a.source){console.warn("[formgen:behaviors] autoSlug config must define a source field.");return}let s=X(r,a.source);if(!s){console.warn(`[formgen:behaviors] source field "${a.source}" not found for autoSlug.`);return}let u=!1,i=e.getAttribute("data-behavior-state")==="manual";!i&&n.value.trim().length>0&&(i=!0,e.setAttribute("data-behavior-state","manual"));let o=()=>{if(i)return;let c=T(s.value||"");c!==n.value&&(u=!0,n.value=c,n.dispatchEvent(new Event("input",{bubbles:!0})),u=!1)},l=()=>{o()},d=c=>{if(u)return;if(n.value.trim().length===0){i=!1,e.removeAttribute("data-behavior-state"),o();return}i=!0,e.setAttribute("data-behavior-state","manual")};return s.addEventListener("input",l),n.addEventListener("input",d),o(),()=>{s.removeEventListener("input",l),n.removeEventListener("input",d)}};function ye(e){if(typeof e=="string")return{source:e};if(e&&typeof e=="object"){let t=e;return{source:typeof t.source=="string"?t.source:void 0}}return{}}var R=({element:e,config:t})=>{let r=A(e);if(!(r instanceof HTMLTextAreaElement)){console.warn("[formgen:behaviors] autoResize requires a textarea target.");return}let n=ge(t),a=be(n),s=()=>{var z;let i=window.getComputedStyle(r),o=ve(i);if(!o)return;let l=parseFloat(i.paddingTop||"0")||0,d=parseFloat(i.paddingBottom||"0")||0,c=parseFloat(i.borderTopWidth||"0")||0,g=parseFloat(i.borderBottomWidth||"0")||0,p=l+d+c+g;r.style.height="auto";let y=(z=a.minRows)!=null?z:r.rows,m=a.maxRows,f=y?o*y+p:void 0,b=m?o*m+p:void 0,E=r.scrollHeight;f!==void 0&&E<f&&(E=f),b!==void 0&&E>b&&(E=b),r.style.height=`${Math.ceil(E)}px`,a.minRows!==void 0&&(r.rows=a.minRows)},u=()=>s();return r.addEventListener("input",u),s(),()=>{r.removeEventListener("input",u)}};function ge(e){if(!e||typeof e!="object")return{};let t=e;return{minRows:Z(t.minRows),maxRows:Z(t.maxRows)}}function Z(e){let t=typeof e=="number"?e:typeof e=="string"?Number.parseInt(e,10):NaN;if(!Number.isFinite(t))return;let r=Math.floor(t);if(!(r<=0))return r}function be(e){let t=e.minRows,r=e.maxRows;return t!==void 0&&r!==void 0&&r<t?{minRows:t,maxRows:t}:e}function ve(e){let t=e.lineHeight;if(t&&t!=="normal"){let n=Number.parseFloat(t);if(Number.isFinite(n)&&n>0)return n}let r=Number.parseFloat(e.fontSize||"");if(Number.isFinite(r)&&r>0)return r*1.2}var k=new Map,x=new WeakMap;function N(e,t){let r=L(e);!r||typeof t!="function"||k.set(r,t)}function Y(e=document){let t=_(e),r=[];for(let n of t){let a=$(n.getAttribute("data-behavior"));if(a.length===0)continue;let s=W(n.getAttribute("data-behavior-config")),u=K(n,e);for(let i of a){let o=L(i);if(!o||xe(n,o))continue;let l=k.get(o);if(!l){console.warn(`[formgen:behaviors] behavior "${o}" is not registered.`);continue}let d=G(s,o,a.length),c=he(l,{element:n,name:o,root:u,config:d});Se(n,o,c),r.push({element:n,name:o,dispose:c})}}return{records:r,dispose:()=>{for(let n of r.splice(0)){if(n.dispose)try{n.dispose()}catch(a){console.warn(`[formgen:behaviors] dispose failed for ${n.name}:`,a)}we(n.element,n.name)}}}}function Q(){k.clear(),x=new WeakMap}function he(e,t){let r;try{r=e(t)}catch(n){console.warn(`[formgen:behaviors] factory for "${t.name}" failed:`,n);return}if(typeof r=="function")return r;if(r&&typeof r=="object"&&typeof r.dispose=="function")return()=>r.dispose()}function Ee(e){let t=x.get(e);return t||(t=new Map,x.set(e,t)),t}function xe(e,t){let r=x.get(e);return r?r.has(t):!1}function Se(e,t,r){Ee(e).set(t,r)}function we(e,t){let r=x.get(e);r&&(r.delete(t),r.size===0&&x.delete(e))}var B=new Map;function J(e,t){let r=C(e);!r||typeof t!="function"||B.set(r,t)}function M(e=document){var n,a;let t=Te(e),r=[];for(let s of t){let u=C(s.getAttribute("data-icon")),i=C(s.getAttribute("data-icon-source"));if(!u||!i)continue;if(C(s.getAttribute("data-icon-raw"))!==""){r.push({element:s,name:u,source:i,rendered:!1});continue}let l=B.get(i);if(!l){r.push({element:s,name:u,source:i,rendered:!1});continue}let d=Ae(l,u),c=Ne(d,(n=s.ownerDocument)!=null?n:document);if(!c){r.push({element:s,name:u,source:i,rendered:!1});continue}let g=Le(s);if(!g){r.push({element:s,name:u,source:i,rendered:!1});continue}for(;g.firstChild;)g.removeChild(g.firstChild);let p=((a=s.ownerDocument)!=null?a:document).createElement("span");p.className="inline-flex size-5 text-current",p.setAttribute("aria-hidden","true"),p.appendChild(c),g.appendChild(p),r.push({element:s,name:u,source:i,rendered:!0})}return{records:r}}function F(){B.clear()}function Te(e){let t=(e instanceof Document,e),r=Array.from(t.querySelectorAll("[data-icon][data-icon-source]"));return e instanceof HTMLElement&&e.hasAttribute("data-icon")&&e.hasAttribute("data-icon-source")&&r.unshift(e),Array.from(new Set(r))}function Le(e){let t=e.parentElement;if(!t)return null;let r=e.previousElementSibling;return r instanceof HTMLElement&&r.tagName==="SPAN"&&r.getAttribute("aria-hidden")==="true"?r:t.querySelector(':scope > span[aria-hidden="true"]')}function Ae(e,t){var r;try{return(r=e(t))!=null?r:""}catch(n){return console.warn(`[formgen:icons] provider for "${t}" failed:`,n),""}}function Ne(e,t){let r=e==null?void 0:e.trim();if(!r||typeof DOMParser=="undefined")return null;let s=new DOMParser().parseFromString(r,"image/svg+xml").querySelector("svg");return s?(Ce(s),typeof t.importNode=="function"?t.importNode(s,!0):s):null}function Ce(e){e.querySelectorAll("script, foreignObject, iframe, object, embed").forEach(r=>{var n;(n=r.parentNode)==null||n.removeChild(r)});let t=[e,...Array.from(e.querySelectorAll("*"))];for(let r of t){let n=Array.from(r.attributes);for(let a of n){let s=a.name.toLowerCase(),u=a.value.trim().toLowerCase();if(s.startsWith("on")){r.removeAttribute(a.name);continue}(s==="href"||s==="xlink:href"||s==="src")&&(!(u===""||u.startsWith("#")||u.startsWith("data:image/"))||u.startsWith("javascript:"))&&r.removeAttribute(a.name)}}}function C(e){var t;return(t=e==null?void 0:e.trim().toLowerCase())!=null?t:""}var Me='[data-json-editor="true"]',U="data-json-editor-init",Ie=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"null",label:"Null"},{value:"object",label:"Object"},{value:"array",label:"Array"}],je=0;function He(){return`json-row-${++je}`}function I(e){try{return JSON.parse(e)}catch{return}}function D(e){return JSON.stringify(e,null,2)}function j(e){return e===null?"null":Array.isArray(e)?"array":typeof e=="object"?"object":typeof e=="number"?"number":typeof e=="boolean"?"boolean":"string"}function ee(e){return Array.isArray(e)?"array":"object"}function V(e){let t=e.trim();if(t==="")return{valid:!1,error:"Number required"};let r=Number(t);return Number.isNaN(r)?{valid:!1,error:"Invalid number"}:Number.isFinite(r)?{valid:!0,value:r}:{valid:!1,error:"Infinity not allowed"}}function Oe(e,t){switch(t){case"string":return e===null?"null":typeof e=="object"?JSON.stringify(e):String(e);case"number":{if(typeof e=="number")return e;if(typeof e=="string"){let r=V(e);return r.valid?r.value:0}return 0}case"boolean":return!!e;case"null":return null;case"object":return{};case"array":return[]}}function S(e,t,r,n,a,s,u=!1){let i=He(),o={id:i,key:t,value:r,type:n,element:null,depth:a,lastValidNumber:typeof r=="number"?r:0,hasError:!1},l=!e.readonly&&!e.disabled,d=document.createElement("div");d.className=`flex items-start gap-2 ${a>0?"ml-4 pl-2 border-l-2 border-gray-200 dark:border-gray-700":""}`,d.setAttribute("data-json-row-id",i);let c=document.createElement("input");c.type="text",c.value=t,u?(c.placeholder="idx",c.disabled=!0,c.readOnly=!0,c.className="flex-shrink-0 w-16 px-2 py-1.5 text-sm text-center border border-gray-200 rounded-md bg-gray-100 dark:bg-slate-700 dark:border-gray-600 dark:text-gray-300 opacity-60 cursor-not-allowed"):(c.placeholder="key",c.disabled=!l,c.readOnly=e.readonly,c.className="flex-shrink-0 w-32 px-2 py-1.5 text-sm border border-gray-200 rounded-md bg-white dark:bg-slate-800 dark:border-gray-600 dark:text-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"+(l?"":" opacity-60 cursor-not-allowed"),l&&c.addEventListener("input",()=>{o.key=c.value,s()}));let g=document.createElement("div");g.className="flex-1 min-w-0",te(g,o,e,s);let p=document.createElement("select");p.disabled=!l,p.className="flex-shrink-0 w-24 px-2 py-1.5 text-sm border border-gray-200 rounded-md bg-white dark:bg-slate-800 dark:border-gray-600 dark:text-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"+(l?"":" opacity-60 cursor-not-allowed");for(let m of Ie){let f=document.createElement("option");f.value=m.value,f.textContent=m.label,f.selected=m.value===n,p.appendChild(f)}l&&p.addEventListener("change",()=>{let m=p.value;o.type=m,o.value=Oe(o.value,m),o.hasError=!1,m==="number"&&typeof o.value=="number"&&(o.lastValidNumber=o.value),g.innerHTML="",te(g,o,e,s),s()});let y=document.createElement("div");if(y.className="flex items-center gap-1 flex-shrink-0",l){let m=q("\u2191","Move up",()=>{re(e,o,-1),s()}),f=q("\u2193","Move down",()=>{re(e,o,1),s()}),b=q("\xD7","Delete",()=>{Re(e,o),s()});b.classList.add("text-red-500","hover:text-red-700"),y.appendChild(m),y.appendChild(f),y.appendChild(b)}return d.appendChild(c),d.appendChild(g),d.appendChild(p),d.appendChild(y),o.element=d,o}function te(e,t,r,n){var s,u;let a=!r.readonly&&!r.disabled;switch(t.type){case"boolean":{let i=document.createElement("div");i.className="flex items-center gap-2 py-1.5";let o=document.createElement("input");o.type="checkbox",o.checked=t.value===!0,o.disabled=!a,o.className="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"+(a?"":" opacity-60 cursor-not-allowed"),a&&o.addEventListener("change",()=>{t.value=o.checked,n()});let l=document.createElement("span");l.textContent=t.value?"true":"false",l.className="text-sm text-gray-600 dark:text-gray-400",a&&o.addEventListener("change",()=>{l.textContent=o.checked?"true":"false"}),i.appendChild(o),i.appendChild(l),e.appendChild(i);break}case"null":{let i=document.createElement("span");i.textContent="null",i.className="text-sm text-gray-400 italic py-1.5 block",e.appendChild(i);break}case"number":{let i=document.createElement("div");i.className="relative";let o=document.createElement("input");o.type="text",o.inputMode="decimal",o.value=String((s=t.value)!=null?s:0),o.disabled=!a,o.readOnly=r.readonly,o.className="w-full px-2 py-1.5 text-sm border rounded-md bg-white dark:bg-slate-800 dark:text-gray-200 focus:ring-1"+(t.hasError?" border-red-500 focus:border-red-500 focus:ring-red-500":" border-gray-200 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500")+(a?"":" opacity-60 cursor-not-allowed");let l=document.createElement("span");l.className="absolute right-2 top-1/2 -translate-y-1/2 text-xs text-red-500 hidden",a&&(o.addEventListener("input",()=>{var c;let d=V(o.value);d.valid?(t.value=d.value,t.lastValidNumber=d.value,t.hasError=!1,o.classList.remove("border-red-500","focus:border-red-500","focus:ring-red-500"),o.classList.add("border-gray-200","dark:border-gray-600","focus:border-blue-500","focus:ring-blue-500"),l.classList.add("hidden"),n()):(t.value=(c=t.lastValidNumber)!=null?c:0,t.hasError=!0,o.classList.remove("border-gray-200","dark:border-gray-600","focus:border-blue-500","focus:ring-blue-500"),o.classList.add("border-red-500","focus:border-red-500","focus:ring-red-500"),l.textContent=d.error,l.classList.remove("hidden"))}),o.addEventListener("blur",()=>{var d;t.hasError&&(o.value=String((d=t.lastValidNumber)!=null?d:0),t.hasError=!1,o.classList.remove("border-red-500","focus:border-red-500","focus:ring-red-500"),o.classList.add("border-gray-200","dark:border-gray-600","focus:border-blue-500","focus:ring-blue-500"),l.classList.add("hidden"))})),i.appendChild(o),i.appendChild(l),e.appendChild(i);break}case"object":case"array":{let i=document.createElement("div");i.className="space-y-2 py-1";let o=document.createElement("span");o.textContent=t.type==="object"?"{ Object }":"[ Array ]",o.className="text-xs text-gray-500 dark:text-gray-400 font-medium block mb-1",i.appendChild(o);let l=document.createElement("div");if(l.className="space-y-2",t.type==="array"&&l.setAttribute("data-json-array","true"),t.type==="object"&&typeof t.value=="object"&&t.value!==null&&!Array.isArray(t.value))for(let[d,c]of Object.entries(t.value)){let g=S(r,d,c,j(c),t.depth+1,()=>{let p={};l.querySelectorAll(":scope > [data-json-row-id]").forEach(y=>{let m=y.querySelector('input[type="text"]');(m&&!m.disabled||m)&&(p[m.value]=v(y))}),t.value=p,n()},!1);l.appendChild(g.element)}else t.type==="array"&&Array.isArray(t.value)&&t.value.forEach((d,c)=>{let g=S(r,String(c),d,j(d),t.depth+1,()=>{let p=[];l.querySelectorAll(":scope > [data-json-row-id]").forEach(y=>{p.push(v(y))}),t.value=p,n()},!0);l.appendChild(g.element)});if(i.appendChild(l),a){let d=document.createElement("button");d.type="button",d.textContent=t.type==="array"?"+ Add Item":"+ Add Field",d.className="mt-1 text-xs text-blue-600 hover:text-blue-700 dark:text-blue-400",d.addEventListener("click",()=>{let c=t.type==="array",g=c?String(l.children.length):"",p=S(r,g,"","string",t.depth+1,()=>{if(t.type==="object"){let y={};l.querySelectorAll(":scope > [data-json-row-id]").forEach(m=>{let f=m.querySelector('input[type="text"]');f&&(y[f.value]=v(m))}),t.value=y}else{let y=[];l.querySelectorAll(":scope > [data-json-row-id]").forEach(m=>{y.push(v(m))}),t.value=y}t.type==="array"&&h(l),n()},c);if(l.appendChild(p.element),t.type==="object"){let y={};l.querySelectorAll(":scope > [data-json-row-id]").forEach(m=>{let f=m.querySelector('input[type="text"]');f&&(y[f.value]=v(m))}),t.value=y}else{let y=[];l.querySelectorAll(":scope > [data-json-row-id]").forEach(m=>{y.push(v(m))}),t.value=y}t.type==="array"&&h(l),n()}),i.appendChild(d)}e.appendChild(i);break}default:{let i=document.createElement("input");i.type="text",i.value=String((u=t.value)!=null?u:""),i.disabled=!a,i.readOnly=r.readonly,i.className="w-full px-2 py-1.5 text-sm border border-gray-200 rounded-md bg-white dark:bg-slate-800 dark:border-gray-600 dark:text-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"+(a?"":" opacity-60 cursor-not-allowed"),a&&i.addEventListener("input",()=>{t.value=i.value,n()}),e.appendChild(i)}}}function v(e){var n,a,s,u;let t=e.querySelector("select"),r=(t==null?void 0:t.value)||"string";switch(r){case"boolean":{let i=e.querySelector('input[type="checkbox"]');return(n=i==null?void 0:i.checked)!=null?n:!1}case"null":return null;case"number":{let i=e.querySelector('input[type="text"][inputmode="decimal"]');if(i){let l=V(i.value);return l.valid?l.value:0}let o=e.querySelector('input[type="number"]');return parseFloat((a=o==null?void 0:o.value)!=null?a:"0")||0}case"object":case"array":{let i=e.querySelectorAll(":scope > div > div > div > [data-json-row-id]");if(r==="object"){let o={};return i.forEach(l=>{let d=l.querySelector('input[type="text"]');d&&(o[d.value]=v(l))}),o}else{let o=[];return i.forEach(l=>o.push(v(l))),o}}default:{let i=e.querySelectorAll('input[type="text"]');for(let o=i.length-1;o>=0;o--){let l=i[o];if(o>0||!l.disabled&&l.placeholder!=="key"&&l.placeholder!=="idx")return(s=l.value)!=null?s:""}return i.length>1&&(u=i[1].value)!=null?u:""}}}function h(e){if(!e)return;Array.from(e.querySelectorAll(":scope > [data-json-row-id]")).forEach((r,n)=>{let a=r.querySelector('input[type="text"]');a&&(a.value=String(n))})}function q(e,t,r){let n=document.createElement("button");return n.type="button",n.textContent=e,n.title=t,n.className="w-6 h-6 flex items-center justify-center text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700",n.addEventListener("click",a=>{a.preventDefault(),r()}),n}function re(e,t,r){let n=e.rows.indexOf(t);if(n!==-1){let o=n+r;if(o<0||o>=e.rows.length)return;if([e.rows[n],e.rows[o]]=[e.rows[o],e.rows[n]],e.rowsContainer){let l=Array.from(e.rowsContainer.children);r===-1&&n>0?e.rowsContainer.insertBefore(l[n],l[n-1]):r===1&&n<l.length-1&&e.rowsContainer.insertBefore(l[n+1],l[n]),e.rootType==="array"&&h(e.rowsContainer)}return}let a=t.element.parentElement;if(!a)return;let s=Array.from(a.querySelectorAll(":scope > [data-json-row-id]")),u=s.indexOf(t.element);if(u===-1)return;let i=u+r;i<0||i>=s.length||(r===-1?a.insertBefore(s[u],s[i]):a.insertBefore(s[i],s[u]),a.getAttribute("data-json-array")==="true"&&h(a))}function Re(e,t){let r=e.rows.indexOf(t);if(r!==-1){e.rows.splice(r,1),t.element.remove(),e.rootType==="array"&&h(e.rowsContainer);return}let n=t.element.parentElement;t.element.remove(),n&&n.getAttribute("data-json-array")==="true"&&h(n)}function ke(e,t){var s;if(e.readonly||e.disabled)return;let r=e.rootType==="array",n=r?String(e.rows.length):"",a=S(e,n,"","string",0,t,r);e.rows.push(a),(s=e.rowsContainer)==null||s.appendChild(a.element),r&&h(e.rowsContainer),t()}function Be(e){if(e.rootType==="array")return e.rows.map(r=>r.value);let t={};for(let r of e.rows)r.key.trim()&&(t[r.key]=r.value);return t}function P(e){let t=Be(e),r=D(t);e.textarea&&(e.textarea.value=r),e.preview&&(e.preview.textContent=r),e.parseError=null,e.root.setAttribute("data-json-editor-state","valid"),ne(e)}function ne(e){var n;if(!e.addButton)return;let t=e.addButton.querySelector("span")||e.addButton.lastChild,r=e.rootType==="array"?"Add Item":"Add Field";if(t&&t.nodeType===Node.TEXT_NODE)t.textContent=r;else if(t&&t instanceof HTMLElement)t.textContent=r;else for(let a of e.addButton.childNodes)if(a.nodeType===Node.TEXT_NODE&&((n=a.textContent)!=null&&n.trim())){a.textContent=` ${r}`;break}}function oe(e,t){var n;e.rows=[],e.rowsContainer&&(e.rowsContainer.innerHTML="");let r=()=>P(e);if(e.rowsContainer){if(Array.isArray(t))e.rootType="array",e.rowsContainer.setAttribute("data-json-array","true"),t.forEach((a,s)=>{var o;let u=j(a),i=S(e,String(s),a,u,0,r,!0);e.rows.push(i),(o=e.rowsContainer)==null||o.appendChild(i.element)}),h(e.rowsContainer);else if(t&&typeof t=="object"){e.rootType="object",e.rowsContainer.removeAttribute("data-json-array");for(let[a,s]of Object.entries(t)){let u=j(s),i=S(e,a,s,u,0,r,!1);e.rows.push(i),(n=e.rowsContainer)==null||n.appendChild(i.element)}}else e.rootType="object",e.rowsContainer.removeAttribute("data-json-array");ne(e)}}function ie(e,t){e.parseError=t,e.root.setAttribute("data-json-editor-state","invalid"),e.preview&&e.preview.setAttribute("data-state","invalid")}function Je(e,t){if(e.activeView=t,e.root.setAttribute("data-json-editor-active",t),e.guiContainer&&e.guiContainer.classList.toggle("hidden",t!=="gui"),e.textarea&&e.textarea.classList.toggle("hidden",t!=="raw"),e.preview&&e.preview.classList.add("hidden"),e.root.querySelectorAll("[data-json-editor-mode-btn]").forEach(n=>{let s=n.getAttribute("data-json-editor-mode-btn")===t;n.classList.toggle("bg-blue-600",s),n.classList.toggle("text-white",s),n.classList.toggle("border-blue-600",s),n.classList.toggle("bg-white",!s),n.classList.toggle("text-gray-700",!s),n.classList.toggle("border-gray-200",!s)}),t==="gui"&&e.textarea){let n=I(e.textarea.value||"{}");n!==void 0?(typeof n=="object"||Array.isArray(n))&&(oe(e,n),e.parseError=null):ie(e,"Invalid JSON in raw editor")}else t==="raw"&&P(e)}function Fe(e){if(e.getAttribute(U)==="true")return;e.setAttribute(U,"true");let t=e.querySelector("[data-json-editor-input]"),r=e.querySelector("[data-json-editor-preview]"),n=e.querySelector("[data-json-editor-gui]"),a=e.querySelector("[data-json-editor-rows]"),s=e.querySelector("[data-json-editor-add-field]"),u=e.querySelector("[data-json-editor-mode-toggle]"),i=e.querySelector("[data-json-editor-format]"),o=e.querySelector("[data-json-editor-toggle]"),l=e.getAttribute("data-json-editor-mode")||"raw",d=e.getAttribute("data-json-editor-active")||"raw",c=e.getAttribute("data-json-editor-readonly")==="true",g=e.getAttribute("data-json-editor-disabled")==="true",p={root:e,textarea:t,preview:r,guiContainer:n,rowsContainer:a,addButton:s,rows:[],mode:l,activeView:d,readonly:c,disabled:g,rootType:"object",parseError:null},y="{}";t&&(y=t.value||"{}");let m=()=>P(p);if(n&&a){let f=I(y);f!==void 0?(p.rootType=ee(f),(typeof f=="object"||Array.isArray(f))&&oe(p,f)):(p.rootType="object",ie(p,"Invalid initial JSON"))}u&&!g&&u.querySelectorAll("[data-json-editor-mode-btn]").forEach(f=>{f.addEventListener("click",b=>{b.preventDefault();let E=f.getAttribute("data-json-editor-mode-btn");Je(p,E)})}),!c&&!g&&(s&&s.addEventListener("click",f=>{f.preventDefault(),ke(p,m)}),t&&t.addEventListener("input",()=>{let f=I(t.value),b=f!==void 0;p.root.setAttribute("data-json-editor-state",b?"valid":"invalid"),b?(p.parseError=null,(typeof f=="object"||Array.isArray(f))&&(p.rootType=ee(f))):p.parseError="Invalid JSON",r&&(r.textContent=b?D(f):t.value,r.setAttribute("data-state",b?"valid":"invalid"))}),i&&t&&i.addEventListener("click",f=>{f.preventDefault();let b=I(t.value);b!==void 0&&(t.value=D(b))})),o&&t&&r&&o.addEventListener("click",f=>{f.preventDefault();let b=e.classList.contains("json-editor--collapsed");e.classList.toggle("json-editor--collapsed",!b),t.classList.toggle("hidden",!b),r.classList.toggle("hidden",b),o.textContent=b?"Collapse":"Expand",o.setAttribute("aria-expanded",b?"true":"false")})}function w(){document.querySelectorAll(Me).forEach(Fe)}typeof document!="undefined"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",w):w());ae();function ae(){N("autoSlug",O),N("autoResize",R)}function qe(e=document){let t=Y(e);return M(e),w(),t}function De(){Q(),F(),ae()}return fe(Ve);})();
//# sourceMappingURL=formgen-behaviors.min.js.map
