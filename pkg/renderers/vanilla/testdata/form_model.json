{
  "operationId": "createWidget",
  "endpoint": "/widgets",
  "method": "POST",
  "summary": "Create widget",
  "description": "Capture metadata for a widget.",
  "metadata": {
    "submitLabel": "Create widget",
    "success-message": "Widget saved",
    "layout.sections": "[{\"id\":\"details\",\"title\":\"Details\",\"order\":0,\"fieldset\":true},{\"id\":\"relationships\",\"title\":\"Relationships\",\"order\":1}]",
    "actions": "[{\"kind\":\"secondary\",\"label\":\"Cancel\",\"href\":\"/widgets\"},{\"kind\":\"primary\",\"label\":\"Create\",\"type\":\"submit\"}]"
  },
  "uiHints": {
    "submitLabel": "Create widget",
    "success-message": "Widget saved",
    "layout.title": "Create Widget",
    "layout.subtitle": "Configure widget metadata and associations.",
    "layout.gridColumns": "12",
    "layout.gutter": "md"
  },
  "fields": [
    {
      "name": "name",
      "type": "string",
      "label": "Name",
      "required": true,
      "description": "Widget name",
      "placeholder": "Give it a friendly name",
      "metadata": {
        "cssClass": "fg-field--name",
        "helpText": "Shown to customers",
        "placeholder": "Give it a friendly name",
        "widget": "textarea",
        "layout.section": "details"
      },
      "uiHints": {
        "cssClass": "fg-field--name",
        "helpText": "Shown to customers",
        "placeholder": "Give it a friendly name",
        "widget": "textarea",
        "layout.span": "6"
      }
    },
    {
      "name": "title",
      "type": "string",
      "label": "Title",
      "required": false,
      "metadata": {
        "layout.section": "details"
      },
      "uiHints": {
        "layout.span": "6"
      }
    },
    {
      "name": "author_id",
      "type": "string",
      "label": "Author",
      "required": true,
      "metadata": {
        "layout.section": "relationships"
      },
      "uiHints": {
        "cardinality": "one",
        "input": "select",
        "placeholder": "Select an author",
        "layout.span": "6"
      },
      "relationship": {
        "kind": "belongsTo",
        "foreignKey": "author_id",
        "cardinality": "one",
        "target": "#/components/schemas/Author"
      }
    },
    {
      "name": "manager",
      "type": "object",
      "label": "Manager",
      "required": false,
      "metadata": {
        "layout.section": "relationships"
      },
      "uiHints": {
        "cardinality": "one",
        "input": "subform",
        "layout.span": "6",
        "layout.start": "7"
      },
      "nested": [
        {
          "name": "id",
          "type": "string",
          "format": "uuid",
          "label": "Id",
          "uiHints": {
            "cardinality": "one",
            "input": "select"
          },
          "relationship": {
            "kind": "hasOne",
            "cardinality": "one",
            "target": "#/components/schemas/Manager"
          }
        }
      ],
      "relationship": {
        "kind": "hasOne",
        "foreignKey": "manager_id",
        "cardinality": "one",
        "target": "#/components/schemas/Manager",
        "sourceField": "manager_id"
      }
    },
    {
      "name": "manager_id",
      "type": "string",
      "label": "Manager Id",
      "required": false,
      "metadata": {
        "layout.section": "relationships"
      },
      "uiHints": {
        "cardinality": "one",
        "input": "select",
        "placeholder": "Select a manager",
        "layout.span": "6"
      },
      "relationship": {
        "kind": "hasOne",
        "foreignKey": "manager_id",
        "cardinality": "one",
        "target": "#/components/schemas/Manager"
      }
    },
    {
      "name": "settings",
      "type": "object",
      "label": "Settings",
      "required": false,
      "metadata": {
        "accordion": "true",
        "cssClass": "fg-fieldset--settings"
      },
      "uiHints": {
        "accordion": "true",
        "cssClass": "fg-fieldset--settings",
        "layout.span": "12"
      },
      "nested": [
        {
          "name": "enabled",
          "type": "boolean",
          "label": "Enable widget",
          "required": false,
          "metadata": {
            "hideLabel": "true",
            "label": "Enable widget"
          },
          "uiHints": {
            "hideLabel": "true",
            "label": "Enable widget"
          }
        },
        {
          "name": "threshold",
          "type": "number",
          "label": "Threshold",
          "required": false,
          "metadata": {
            "helpText": "Controls the debounce window",
            "inputType": "range",
            "precision": "2",
            "unit": "ms"
          },
          "uiHints": {
            "helpText": "Controls the debounce window",
            "inputType": "range",
            "precision": "2",
            "unit": "ms"
          }
        }
      ]
    },
    {
      "name": "tags",
      "type": "array",
      "label": "Tags",
      "required": false,
      "placeholder": "Add tag",
      "metadata": {
        "cssClass": "fg-array--tags",
        "placeholder": "Add tag",
        "repeaterLabel": "Tag",
        "layout.section": "relationships"
      },
      "uiHints": {
        "cardinality": "many",
        "cssClass": "fg-array--tags",
        "input": "collection",
        "placeholder": "Add tag",
        "repeaterLabel": "Tag",
        "layout.span": "12"
      },
      "items": {
        "name": "tagsItem",
        "type": "object",
        "label": "Tags item",
        "required": false,
        "metadata": {
          "badge": "info",
          "cssClass": "fg-array__item"
        },
        "uiHints": {
          "badge": "info",
          "cardinality": "many",
          "cssClass": "fg-array__item",
          "input": "subform"
        },
        "nested": [
          {
            "name": "id",
            "type": "string",
            "format": "uuid",
            "label": "Id"
          }
        ],
        "relationship": {
          "kind": "hasMany",
          "cardinality": "many",
          "target": "#/components/schemas/Tag",
          "inverse": "article"
        }
      },
      "relationship": {
        "kind": "hasMany",
        "cardinality": "many",
        "target": "#/components/schemas/Tag",
        "inverse": "article"
      }
    }
  ]
}
