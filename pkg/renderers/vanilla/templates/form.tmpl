{%- if stylesheets -%}
{%- for href in stylesheets -%}
<link rel="stylesheet" href="{{ href }}">
{%- endfor -%}
{%- endif -%}
{%- if inline_styles -%}
<style data-formgen-default-style>{{ inline_styles|safe }}</style>
{%- endif -%}

{% set grid_columns = layout.gridColumnsValue -%}
{% if not grid_columns %}
{% set grid_columns = layout.gridColumns -%}
{% endif %}
{% if not grid_columns %}
{% set grid_columns = 12 %}
{% endif %}
{% set grid_gutter = layout.gutter -%}
{% if not grid_gutter %}
{% set grid_gutter = 'md' %}
{% endif %}

<form class="max-w-4xl mx-auto space-y-6 p-6 bg-white rounded-xl border border-gray-200 dark:bg-slate-900 dark:border-gray-700" method="{{ render_options.method_attr or form.method|lower }}" action="{{ form.endpoint }}" data-formgen-auto-init="true">
    {% if render_options.method_override %}
    <input type="hidden" name="_method" value="{{ render_options.method_override }}">
    {% endif %}
    {% if form.uiHints and (form.uiHints['layout.title'] or form.uiHints['layout.subtitle']) %}
    <header class="space-y-2 pb-4 border-b border-gray-200 dark:border-gray-700">
        {% if form.uiHints['layout.title'] %}
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white">{{ form.uiHints['layout.title'] }}</h1>
        {% endif %}
        {% if form.uiHints['layout.subtitle'] %}
        <p class="text-sm text-gray-600 dark:text-gray-400">{{ form.uiHints['layout.subtitle'] }}</p>
        {% endif %}
    </header>
    {% endif %}

    {% if layout.unsectioned and layout.unsectioned|length > 0 %}
    <div class="grid gap-6"{% if grid_columns and grid_columns > 1 %} style="grid-template-columns: repeat({{ grid_columns }}, minmax(0, 1fr))"{% endif %}>
        {% for field in layout.unsectioned %}
        <div{% if field.style %}{{ field.style|safe }}{% endif %}>
            {{ field.html|safe }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if layout.sections %}
    {% for section in layout.sections %}
    <section class="space-y-4{% if section.fieldset %} p-4 border border-gray-200 rounded-lg dark:border-gray-700{% endif %}">
        {% if section.title or section.description %}
        <header class="space-y-1">
            {% if section.title %}
            <h2 class="text-lg font-semibold text-gray-900 dark:text-white">{{ section.title }}</h2>
            {% endif %}
            {% if section.description %}
            <p class="text-sm text-gray-600 dark:text-gray-400">{{ section.description }}</p>
            {% endif %}
        </header>
        {% endif %}
        {% if section.fieldset %}
        <fieldset>
            <div class="grid gap-6"{% if grid_columns and grid_columns > 1 %} style="grid-template-columns: repeat({{ grid_columns }}, minmax(0, 1fr))"{% endif %}>
                {% for field in section.fields %}
                <div{% if field.style %}{{ field.style|safe }}{% endif %}>
                    {{ field.html|safe }}
                </div>
                {% endfor %}
            </div>
        </fieldset>
        {% else %}
        <div class="grid gap-6"{% if grid_columns and grid_columns > 1 %} style="grid-template-columns: repeat({{ grid_columns }}, minmax(0, 1fr))"{% endif %}>
            {% for field in section.fields %}
            <div{% if field.style %}{{ field.style|safe }}{% endif %}>
                {{ field.html|safe }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </section>
    {% endfor %}
    {% endif %}

    <div class="flex gap-x-2 pt-4 border-t border-gray-200 dark:border-gray-700">
        {% if actions and actions|length > 0 %}
            {% for action in actions %}
                {% if action.href %}
                <a class="py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border{% if action.kind == 'primary' %} border-transparent bg-blue-600 text-white hover:bg-blue-700{% else %} border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800{% endif %} disabled:opacity-50 disabled:pointer-events-none" href="{{ action.href }}">{{ action.label }}</a>
                {% else %}
                <button type="{{ action.type }}" class="py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border{% if action.kind == 'primary' or not action.kind %} border-transparent bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2{% else %} border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800{% endif %} disabled:opacity-50 disabled:pointer-events-none">{{ action.label }}</button>
                {% endif %}
            {% endfor %}
        {% else %}
            <button type="submit" class="py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none">Submit</button>
        {% endif %}
    </div>
</form>

{% if component_scripts and component_scripts|length > 0 %}
{% for script in component_scripts %}
{% if script.inline %}
<script{% if script.type %} type="{{ script.type }}"{% elif script.module %} type="module"{% endif %}{% if script.defer %} defer{% endif %}{% if script.async %} async{% endif %}{% if script.attrs %}{% for key, value in script.attrs.items() %} {{ key }}="{{ value }}"{% endfor %}{% endif %}>{{ script.inline|safe }}</script>
{% else %}
<script src="{{ script.src }}"{% if script.type %} type="{{ script.type }}"{% elif script.module %} type="module"{% endif %}{% if script.defer %} defer{% endif %}{% if script.async %} async{% endif %}{% if script.attrs %}{% for key, value in script.attrs.items() %} {{ key }}="{{ value }}"{% endfor %}{% endif %}></script>
{% endif %}
{% endfor %}
{% endif %}
