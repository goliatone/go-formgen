{%- if stylesheets -%}
{%- for href in stylesheets -%}
<link rel="stylesheet" href="{{ href }}">
{%- endfor -%}
{%- endif -%}
{%- if inline_styles -%}
<style data-formgen-default-style>{{ inline_styles|safe }}</style>
{%- endif -%}

{% set grid_columns = layout.gridColumns or 12 -%}
{% set grid_gutter = layout.gutter or 'md' -%}

<form class="grid gap-6 p-6 bg-white rounded-lg border border-gray-200" method="{{ form.method }}" action="{{ form.endpoint }}" data-formgen-auto-init="true">
    {% if form.uiHints and (form.uiHints['layout.title'] or form.uiHints['layout.subtitle']) %}
    <header class="grid gap-1">
        {% if form.uiHints['layout.title'] %}<h1 class="text-2xl font-semibold text-gray-900">{{ form.uiHints['layout.title'] }}</h1>{% endif %}
        {% if form.uiHints['layout.subtitle'] %}<p class="text-gray-600">{{ form.uiHints['layout.subtitle'] }}</p>{% endif %}
    </header>
    {% endif %}

    {% if layout.unsectioned and layout.unsectioned|length > 0 %}
    <div class="grid gap-4 grid-cols-{{ grid_columns }}">
        {% for field in layout.unsectioned %}
        <div class="fg-grid__item"{% if field.style %}{{ field.style|safe }}{% endif %}>
            {{ field.html|safe }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if layout.sections %}
    {% for section in layout.sections %}
    <section class="grid gap-4 border border-gray-200 rounded-lg p-5 bg-white{% if section.fieldset %} border-none p-0{% endif %}">
        {% if section.title or section.description %}
        <header class="grid gap-1">
            {% if section.title %}<h2 class="text-xl font-semibold">{{ section.title }}</h2>{% endif %}
            {% if section.description %}<p class="text-gray-600">{{ section.description }}</p>{% endif %}
        </header>
        {% endif %}
        {% if section.fieldset %}
        <fieldset class="border-none rounded-lg m-0 p-5 bg-gray-50">
            <div class="grid gap-4 grid-cols-{{ grid_columns }}">
                {% for field in section.fields %}
                <div class="fg-grid__item"{% if field.style %}{{ field.style|safe }}{% endif %}>
                    {{ field.html|safe }}
                </div>
                {% endfor %}
            </div>
        </fieldset>
        {% else %}
        <div class="grid gap-4 grid-cols-{{ grid_columns }}">
            {% for field in section.fields %}
            <div class="fg-grid__item"{% if field.style %}{{ field.style|safe }}{% endif %}>
                {{ field.html|safe }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </section>
    {% endfor %}
    {% endif %}

    <div class="flex gap-2">
        {% if actions and actions|length > 0 %}
            {% for action in actions %}
                {% if action.href %}
                <a class="px-4 py-2 text-sm font-medium rounded-md {% if action.kind == 'primary' %}bg-blue-600 text-white hover:bg-blue-700{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %}" href="{{ action.href }}">{{ action.label }}</a>
                {% else %}
                <button type="{{ action.type or 'submit' }}" class="px-4 py-2 text-sm font-medium rounded-md {% if action.kind == 'primary' or not action.kind %}bg-blue-600 text-white hover:bg-blue-700{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %}">{{ action.label }}</button>
                {% endif %}
            {% endfor %}
        {% else %}
            <button type="submit" class="px-4 py-2 text-sm font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700">Submit</button>
        {% endif %}
    </div>
</form>

{% if component_scripts and component_scripts|length > 0 %}
{% for script in component_scripts %}
{% if script.inline %}
<script{% if script.type %} type="{{ script.type }}"{% elif script.module %} type="module"{% endif %}{% if script.defer %} defer{% endif %}{% if script.async %} async{% endif %}{% if script.attrs %}{% for key, value in script.attrs.items() %} {{ key }}="{{ value }}"{% endfor %}{% endif %}>{{ script.inline|safe }}</script>
{% else %}
<script src="{{ script.src }}"{% if script.type %} type="{{ script.type }}"{% elif script.module %} type="module"{% endif %}{% if script.defer %} defer{% endif %}{% if script.async %} async{% endif %}{% if script.attrs %}{% for key, value in script.attrs.items() %} {{ key }}="{{ value }}"{% endfor %}{% endif %}></script>
{% endif %}
{% endfor %}
{% endif %}
