openapi: 3.0.3
info:
  title: Relationship fixture
  version: "1.0"
paths:
  /articles:
    post:
      operationId: createArticle
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - author_id
              properties:
                author:
                  allOf:
                    - $ref: '#/components/schemas/Author'
                  type: object
                  x-relationships:
                    type: belongsTo
                    target: '#/components/schemas/Author'
                    foreignKey: author_id
                title:
                  type: string
                author_id:
                  $ref: '#/components/schemas/UUID'
                manager:
                  type: object
                  x-relationships:
                    type: hasOne
                    target: '#/components/schemas/Manager'
                    foreignKey: manager_id
                manager_id:
                  type: string
                category_id:
                  type: string
                  x-relationships:
                    type: belongsTo
                    target: '#/components/schemas/Category'
                tags:
                  type: array
                  items:
                    $ref: '#/components/schemas/Tag'
                  x-relationships:
                    type: hasMany
                    target: '#/components/schemas/Tag'
                    inverse: article
      responses:
        '204':
          description: Accepted
components:
  schemas:
    Author:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/UUID'
    Manager:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/UUID'
    Tag:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/UUID'
    Category:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/UUID'
    UUID:
      type: string
      format: uuid
